@resource gleanBoard.Resources.Board

<!DOCTYPE html>
<html>
<head>
    <title>gleanBoard</title>
    <link href="/assets/Site.css" rel="stylesheet" type="text/css" />
    <link href="/assets/themes/smoothness/jquery-ui.css" rel="stylesheet" type="text/css" />
    <script src="/Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
    <script src="/Scripts/jquery-ui-1.8.11.min.js" type="text/javascript"></script>
    <script type='text/javascript' src='/Scripts/jquery.tmpl.js'></script>
    <script type='text/javascript' src='/Scripts/knockout-1.2.1.js'></script>
</head>

<body>
    <div class="page">

        <div id="header">
            <div id="title">
                <img src="/assets/images/logo.gif" alt="Logo" />
            </div>

            <div id="logindisplay">
                <a href="/login">LOGIN</a>
            </div>

            <div id="menucontainer">
                <ul id="menu">
                    <li><a href="/">HOME</a></li>
                    <li><a href="/features">FEATURES</a></li>
                    <li><a href="/demo">DEMO</a></li>
                    <li><a href="/signup">SIGN UP</a></li>
                </ul>
            </div>
        </div>

        <div id="main">
            


<script type="text/javascript">
	$(function () {
		$("@string.Join(", ", Resource.Lanes.Select(x => string.Format("#sortable_{0}", x.Name)))").sortable({
			connectWith: ".connectedSortable"
		}).disableSelection();

        $("@string.Join(", ", Resource.Lanes.Select(x => string.Format("#sortable_{0}", x.Name)))").bind( "sortreceive", function(event, ui) {
          alert('Moved item ' + event.toElement.id + ' to lane ' + event.target.id);
          //console.log(event);
          //console.log(ui);
        });

	});
</script>
<h2>Board</h2>

<style type="text/css">
	.sortable { list-style-type: none; margin: 0; padding: 0; float: left; margin-right: 10px; }
	.sortable li { margin: 0 5px 5px 5px; padding: 5px; height:50px; border:1px solid grey;}
</style>

<div>

@foreach (var lane in Resource.Lanes)
{ 
	<div style="float:left; border:1px solid grey; width:250px;">
		<div style="font-weight:bold;">@lane.Name</div>
        <ul id="@string.Format("sortable_{0}", lane.Name)" class="connectedSortable sortable" style="height:400px; width:100%;">
		@foreach(var card in lane.Cards)
		{
			<li id="@Guid.NewGuid().ToString()">@card</li>
		}
        </ul>
	</div>
}

</div>

<form>

    <label>Title:</label> <input type="text" id="newCardName" />
    <select id="newCardLane">
        <option value="Backlog">Backlog</option>
        <option value="WorkingOn">WorkingOn</option>
        <option value="Completed">Completed</option>
    </select>
    <button type="button" onclick="createCard();">Create New Card</button>
</form>

<script type="text/javascript">

    function createCard() {
        $.post("/card/create",
         { title: "", lane: "" },
         function () {
             alert("success");
         })
    }

</script>


        </div>
    </div>
</body>
</html>